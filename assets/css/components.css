/* components.css — cards, accordions, badges, tables, etc. */

/* ── Card ── */
.card {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}

.card__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-5) var(--space-6);
  border-bottom: 1px solid var(--color-border);
}

.card__title {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--text-base);
  font-weight: var(--weight-semi);
  letter-spacing: -0.01em;
}

.card__icon {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.card__body { padding: var(--space-4) var(--space-6) var(--space-6); }
.card__body--flush { padding: 0; }

/* ── KPI Card ── */
.kpi-card {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
  padding: var(--space-5) var(--space-6);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  transition: box-shadow var(--duration) var(--ease),
              transform var(--duration) var(--ease);
}
.kpi-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.kpi-card__label {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-2);
}

.kpi-card__value {
  font-size: var(--text-3xl);
  font-weight: var(--weight-bold);
  letter-spacing: -0.03em;
  line-height: 1;
}

.kpi-card__delta {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.kpi-card__delta--up   { color: var(--color-success); }
.kpi-card__delta--down { color: var(--color-danger); }
.kpi-card__delta--flat { color: var(--color-text-3); }

/* ── Hero KPI ── */
.hero-kpi__label {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  opacity: 0.8;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: var(--space-2);
}
.hero-kpi__value {
  font-size: 3.5rem;
  font-weight: var(--weight-bold);
  letter-spacing: -0.04em;
  line-height: 1;
}
.hero-kpi__sub {
  font-size: var(--text-sm);
  opacity: 0.7;
  margin-top: var(--space-2);
}
.hero-kpi__sparkline {
  flex: 1;
  max-width: 280px;
}
.hero-kpi__stats {
  display: flex;
  gap: var(--space-6);
  margin-top: var(--space-6);
}
.hero-kpi__stat-label { font-size: var(--text-xs); opacity: 0.65; }
.hero-kpi__stat-value { font-size: var(--text-lg); font-weight: var(--weight-semi); }

/* ── Accordion ── */
.accordion { display: flex; flex-direction: column; }

.accordion__item {
  border-bottom: 1px solid var(--color-border);
}
.accordion__item:last-child { border-bottom: none; }

.accordion__trigger {
  width: 100%;
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-6);
  background: none;
  text-align: left;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--color-text);
  transition: background var(--duration) var(--ease);
}
.accordion__trigger:hover { background: var(--color-surface-2); }

.accordion__chevron {
  margin-left: auto;
  width: 18px;
  height: 18px;
  color: var(--color-text-3);
  transition: transform var(--duration) var(--ease);
  flex-shrink: 0;
}
.accordion__item.is-open .accordion__chevron { transform: rotate(180deg); }

.accordion__body {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 280ms var(--ease);
}
.accordion__item.is-open .accordion__body { grid-template-rows: 1fr; }
.accordion__inner {
  overflow: hidden;
  padding: 0 var(--space-6) 0 calc(var(--space-6) + 24px + var(--space-3));
}
.accordion__item.is-open .accordion__inner { padding-bottom: var(--space-4); }

/* ── Badge ── */
.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: 2px var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  white-space: nowrap;
}
.badge--blue    { background: var(--color-primary-lt); color: var(--color-primary-dk); }
.badge--green   { background: var(--color-success-lt); color: var(--color-success); }
.badge--amber   { background: var(--color-warning-lt); color: var(--color-warning); }
.badge--red     { background: var(--color-danger-lt);  color: var(--color-danger); }
.badge--purple  { background: var(--color-purple-lt);  color: var(--color-purple); }
.badge--gray    { background: var(--color-border);     color: var(--color-text-2); }

/* ── Progress bar ── */
.progress { height: 6px; background: var(--color-border); border-radius: var(--radius-full); overflow: hidden; }
.progress__fill { height: 100%; border-radius: var(--radius-full); transition: width 0.8s var(--ease); }

/* ── To-do item ── */
.todo-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-6);
  border-bottom: 1px solid var(--color-border);
  transition: background var(--duration) var(--ease);
}
.todo-item:last-child { border-bottom: none; }
.todo-item:hover { background: var(--color-surface-2); }

.todo-check {
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-border);
  border-radius: 4px;
  flex-shrink: 0;
  margin-top: 2px;
  cursor: pointer;
  transition: all var(--duration) var(--ease);
  display: flex;
  align-items: center;
  justify-content: center;
}
.todo-item.is-done .todo-check {
  background: var(--color-success);
  border-color: var(--color-success);
}
.todo-item.is-done .todo-check::after {
  content: '';
  width: 5px;
  height: 9px;
  border: 2px solid white;
  border-top: none;
  border-left: none;
  transform: rotate(45deg) translateY(-1px);
}
.todo-item.is-done .todo-text {
  text-decoration: line-through;
  color: var(--color-text-3);
}
.todo-text { font-size: var(--text-sm); flex: 1; }
.todo-meta { font-size: var(--text-xs); color: var(--color-text-3); margin-top: var(--space-1); }

/* ── Delegation table ── */
.del-table { width: 100%; }
.del-row {
  display: grid;
  grid-template-columns: 1fr 130px 120px 90px;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-3) var(--space-6);
  border-bottom: 1px solid var(--color-border);
  font-size: var(--text-sm);
  transition: background var(--duration) var(--ease);
}
.del-row:last-child { border-bottom: none; }
.del-row:hover { background: var(--color-surface-2); }
.del-row--header {
  font-size: var(--text-xs);
  font-weight: var(--weight-semi);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--color-text-3);
  background: var(--color-surface-2);
}
.del-row--overdue { background: rgba(220,38,38,0.04); }

.avatar {
  width: 26px;
  height: 26px;
  border-radius: var(--radius-full);
  background: var(--color-primary-lt);
  color: var(--color-primary);
  font-size: var(--text-xs);
  font-weight: var(--weight-bold);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.del-person {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-weight: var(--weight-medium);
}

/* ── Sparkline (SVG) ── */
.sparkline { overflow: visible; }

/* ── Today's Focus ── */
.focus-add-row {
  display: flex;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-6) var(--space-2);
  border-bottom: 1px solid var(--color-border);
}

.focus-add-row input {
  flex: 1;
  padding: var(--space-2) var(--space-3);
  border: 1.5px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-family: inherit;
  color: var(--color-text);
  background: var(--color-surface);
  outline: none;
  transition: border-color var(--duration) var(--ease);
}
.focus-add-row input:focus { border-color: var(--color-primary); }
.focus-add-row input::placeholder { color: var(--color-text-3); }

.focus-progress-wrap {
  height: 3px;
  background: var(--color-border);
  overflow: hidden;
}
.focus-progress-bar {
  height: 100%;
  background: var(--color-primary);
  transition: width 0.4s var(--ease);
}

.focus-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-6);
  border-bottom: 1px solid var(--color-border);
  transition: background var(--duration) var(--ease);
}
.focus-item:last-child { border-bottom: none; }
.focus-item:hover { background: var(--color-surface-2); }

.focus-check {
  width: 18px;
  height: 18px;
  min-width: 18px;
  border: 2px solid var(--color-border);
  border-radius: var(--radius-full);
  flex-shrink: 0;
  margin-top: 2px;
  cursor: pointer;
  transition: all var(--duration) var(--ease);
  display: flex;
  align-items: center;
  justify-content: center;
}
.focus-item.is-done .focus-check {
  background: var(--color-success);
  border-color: var(--color-success);
}
.focus-item.is-done .focus-check::after {
  content: '';
  width: 4px;
  height: 8px;
  border: 2px solid white;
  border-top: none;
  border-left: none;
  transform: rotate(45deg) translateY(-1px);
}
.focus-item.is-done .focus-text {
  text-decoration: line-through;
  color: var(--color-text-3);
}
.focus-text { font-size: var(--text-sm); flex: 1; line-height: 1.4; }

.focus-delete {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-3);
  font-size: 16px;
  line-height: 1;
  padding: 2px 4px;
  border-radius: var(--radius-sm);
  opacity: 0;
  transition: opacity var(--duration) var(--ease), color var(--duration) var(--ease);
}
.focus-item:hover .focus-delete { opacity: 1; }
.focus-delete:hover { color: var(--color-danger); }

.focus-empty {
  padding: var(--space-6);
  text-align: center;
  font-size: var(--text-sm);
  color: var(--color-text-3);
}

/* ── Add button ── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  transition: all var(--duration) var(--ease);
}
.btn--primary {
  background: var(--color-primary);
  color: #fff;
}
.btn--primary:hover { background: var(--color-primary-dk); }
.btn--ghost {
  background: transparent;
  color: var(--color-text-2);
  border: 1px solid var(--color-border);
}
.btn--ghost:hover { background: var(--color-surface-2); }

/* ── Overdue indicator ── */
.overdue-dot {
  width: 8px; height: 8px;
  border-radius: var(--radius-full);
  background: var(--color-danger);
  display: inline-block;
  margin-right: var(--space-1);
}
